<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="org.example.coffee.mapper.CoffeeMapper">

    <!-- 관리자 페이지에서 상품의 목록을 보여주는 sql -->
    <select id="productList" resultType="dto">
        select product_id, product_name, price, quantity, imagename, category_id
        from product
    </select>

    <!-- 관리자 페이지에서 상품을 등록하는 sql -->
    <insert id="insert" parameterType="dto">
        insert into product
        values (0, #{product_name}, #{price}, #{quantity}, #{imagename}, #{category_id})
    </insert>

    <!-- 주문 취소 시 해당 주문의 product_id와 count를 받아서 update 해주는 sql -->
    <update id="update" parameterType="dto">
        update product
        set quantity=quantity+#{quantity}
        where product_id=#{product_id}
    </update>

    <!-- 상품 id로 상품을 조회하는 sql  -->
    <select id="select" parameterType="dto" resultType="dto">
        select product_id, product_name, price, quantity, imagename, category_id
        from product
        where product_id = #{product_id}
    </select>

    <!-- 상품 업데이트 -->
    <update id="updateProduct" parameterType="dto">
        update product
        set product_name=#{product_name},
            price=#{price},
            quantity=#{quantity},
            category_id=#{category_id}
        where product_id = #{product_id};
    </update>

    <!-- 상품 이미지 업데이트 -->
    <update id="updateImage" parameterType="dto">
        update product
        set imagename=#{imagename}
        where product_id = #{product_id};
    </update>
</mapper>